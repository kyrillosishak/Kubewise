Thank you for installing {{ .Chart.Name }}!

Your release is named: {{ .Release.Name }}

{{- if .Values.resourceAgent.enabled }}

== Resource Agent ==
The Resource Agent is deployed as a DaemonSet and will run on all nodes.
{{- if .Values.resourceAgent.metrics.enabled }}
Metrics are available at port {{ .Values.resourceAgent.metrics.port }} on each node.
{{- end }}
{{- end }}

{{- if .Values.recommendationApi.enabled }}

== Recommendation API ==
{{- if .Values.recommendationApi.ingress.enabled }}
The API is accessible via Ingress at:
{{- range .Values.recommendationApi.ingress.hosts }}
  http{{ if $.Values.recommendationApi.ingress.tls }}s{{ end }}://{{ .host }}
{{- end }}
{{- else }}
To access the API, run:
  kubectl port-forward svc/{{ include "predictor.fullname" . }}-api {{ .Values.recommendationApi.service.restPort }}:{{ .Values.recommendationApi.service.restPort }} -n {{ .Release.Namespace }}

Then access the API at: http://localhost:{{ .Values.recommendationApi.service.restPort }}
{{- end }}

API Endpoints:
  - GET  /api/v1/recommendations           - List all recommendations
  - GET  /api/v1/recommendations/{ns}      - Recommendations by namespace
  - GET  /api/v1/costs                     - Cluster-wide cost analysis
  - GET  /api/v1/savings                   - Projected savings
  - GET  /healthz                          - Health check
  - GET  /metrics                          - Prometheus metrics
{{- end }}

== Next Steps ==
1. Verify the deployment:
   kubectl get pods -n {{ .Release.Namespace }} -l app.kubernetes.io/instance={{ .Release.Name }}

2. Check agent logs:
   kubectl logs -n {{ .Release.Namespace }} -l app.kubernetes.io/component=resource-agent

3. Check API logs:
   kubectl logs -n {{ .Release.Namespace }} -l app.kubernetes.io/component=recommendation-api

{{- if .Values.recommendationApi.config.dryRunMode }}

NOTE: Dry-run mode is enabled. Recommendations will be generated but not automatically applied.
{{- end }}

For more information, visit: {{ .Chart.Home }}
